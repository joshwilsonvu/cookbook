---
import { getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";
import { getTitle } from "../../utils";
import Recipe from "../../components/Recipe.astro";

// 1. Generate a new path for every collection entry
export async function getStaticPaths() {
  const recipes = await getCollection("recipes");
  return recipes.map((recipe) => ({
    // for generating pages
    params: { id: recipe.id },
    // passed to each page
    props: { title: recipe.data.title || getTitle(recipe.id) },
  }));
}
---

<Layout title={Astro.props.title}>
  <Recipe id={Astro.params.id} />
</Layout>
